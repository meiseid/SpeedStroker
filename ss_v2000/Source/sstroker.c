////Includes#include <windows.h>    // includes basic windows functionality#include "errcode.h"#include "timectrl.h"#include "drawctrl.h"#include "gamectrl.h"#include "modeb.h"#include "appdata.h"#include "modea.h"////Grobal External ValiablesHINSTANCE g_hInst;		// the current instanceHWND g_hWnd;				// main window handle////PrototypesBOOL InitApplication(HANDLE);BOOL InitInstance(HANDLE, int);VOID StartUp( VOID );	//WM_CREATEVOID CleanUp( VOID );	//WM_DESTOROYlong APIENTRY MainWndProc(HWND, UINT, UINT, LONG);////Destint APIENTRY WinMain( HINSTANCE hInstance, HINSTANCE hPrevInstance,    LPSTR lpCmdLine, int nCmdShow ){	 MSG msg;	 if (!InitApplication(hInstance))				return (FALSE);	 // Create the main window.	 if (!InitInstance(hInstance, nCmdShow))		  return (FALSE);	// Acquire and dispatch messages until a WM_QUIT message is received.	 while (GetMessage(&msg,NULL,0,0))        {            TranslateMessage(&msg);    // Translates virtual key codes.            DispatchMessage(&msg);     // Dispatches message to window.        }    return (msg.wParam);           // Returns the value from PostQuitMessage.}BOOL InitApplication(HANDLE hInstance)       {    WNDCLASS  wc;    // Register the window class for my window.                                                           */    wc.style = 0;                       // Class style.    wc.lpfnWndProc = (WNDPROC)MainWndProc; // Window procedure for this class.    wc.cbClsExtra = 0;                  // No per-class extra data.    wc.cbWndExtra = 0;                  // No per-window extra data.    wc.hInstance = hInstance;           // Application that owns the class.    wc.hIcon = LoadIcon(hInstance, GetString(GS_NAME_ICON) );     wc.hCursor = LoadCursor(NULL, IDC_ARROW);    wc.hbrBackground = GetStockObject( BLACK_BRUSH );    wc.lpszMenuName =  NULL;   // Name of menu resource in .RC file.    wc.lpszClassName = GetString( GS_WNDCLASS );; // Name used in call to CreateWindow.    return (RegisterClass(&wc));}////メイン画面生成BOOL InitInstance( HANDLE hInstance, int nCmdShow){	//インスタンスハンドルのセット    	g_hInst = hInstance;    // Create a main window for this application instance.    g_hWnd = CreateWindow(        GetString( GS_WNDCLASS ),        GetString( GS_APPLICATION ),        WS_POPUP | WS_MAXIMIZE,            // Window style.        0,                  // Default horizontal position.        0,                  // Default vertical position.        GetSystemMetrics( SM_CXSCREEN ),                  // Default width.        GetSystemMetrics( SM_CYSCREEN ),                  // Default height.        NULL,                           // Overlapped windows have no parent.        NULL,                           // Use the window class menu.        g_hInst,                        // This instance owns this window.        NULL                            // Pointer not needed.    );    // If window could not be created, return "failure".    if (!g_hWnd)        return (FALSE);    // Make the window visible; update its client area; and return "success".    ShowWindow(g_hWnd, nCmdShow);    UpdateWindow(g_hWnd);    return (TRUE);} ////スタートアップ処理VOID StartUp( VOID ){	ERRCODE err;       //アプリケーションが必要とする全てのデータを作成する   if( (err =NewAppData())!=ERR_NOTHING ){		ErrorExit( err );      	return;   }     	ShowCursor( FALSE ); 	StartModeA( FALSE );	}////クリーンナップ処理VOID CleanUp( VOID ){	EndTimer();	DeleteAppData();		ShowCursor( TRUE );}LONG APIENTRY MainWndProc( HWND hWnd, UINT message, UINT wParam, LONG lParam){    PAINTSTRUCT ps;    HDC hDC;    g_hWnd = hWnd; //初期化    switch (message) {    case WM_CREATE:            StartUp();            break;    case WM_KEYDOWN:		KeyGame(wParam);    		break;    case WM_LBUTTONDOWN:    	ClickGame( LOWORD(lParam),HIWORD(lParam) );	break;	case WM_MOUSEMOVE:	CursorGame( LOWORD(lParam),HIWORD(lParam) );	break;    case WM_CHAR:            CharGame((BYTE)wParam);    		break;    case WM_PAINT:            hDC = BeginPaint( hWnd,&ps );            DrawScreen( hDC );            EndPaint( hWnd,&ps );             break;    case WM_TIMER:        	TimerGame( wParam );        	break;            case WM_DESTROY:        	CleanUp();            	PostQuitMessage(0);        	break;    default:            return (DefWindowProc(hWnd, message, wParam, lParam));    }        return (0);}