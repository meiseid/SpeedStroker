#include "char.h"BOOL // TRUE:入力をチェックせよ FALSE:無視せよConvertChar(BYTE byCode,	//入力コードDWORD dwIndex,//文字列中の現在位置LPSTR lpszNow,//文字列(小文字のみ)BYTE* pbyNewCode,//変換コードDWORD* pdwInc, //DWORD* pdwPreInc ) //{#define NOW	lpszNow[dwIndex]#define NEXT	lpszNow[dwIndex+1]#define PREV	lpszNow[dwIndex-1]	//初期化	*pbyNewCode = byCode;	*pdwInc = 0;	*pdwPreInc = 0;		//N: nn->n 01/01/24 NEW!!	if( NOW == 'n' && byCode != 'n' && byCode != 'N' && NEXT != '\0' ){		if( NEXT != 'y' && NEXT != 'a' && NEXT != 'i' && NEXT != 'u' && NEXT != 'e' && NEXT != 'o' && NEXT != 'n'){				*pdwPreInc = 1;			return TRUE;		}			}	//J: j -> zy j->z	if( byCode == 'j' || byCode == 'J' ){		if( NOW=='z' && NEXT != '\0' && (NEXT=='i' || NEXT=='y' || NEXT=='z') ){					*pbyNewCode = 'z';				if( NEXT=='y' ) 					*pdwInc=1;		}		return TRUE;	}		//H: sh -> sy, shi -> si ,ch->ty,chi->ti	if( (byCode == 'h' || byCode == 'H') && dwIndex!=0 && (PREV=='s'  || PREV=='t') ){		if( NOW=='y' ){			*pbyNewCode = 'y';				return TRUE;		}		else if( NOW=='i' ){			return FALSE;		}				return TRUE;	}	//L: l->x	if( (byCode == 'l' || byCode == 'L') && NOW=='x' ){		*pbyNewCode = 'x';			return TRUE;	}		//C:	if( (byCode == 'c' || byCode == 'C') && NEXT != '\0' ){		if( NOW=='t' && ( NEXT=='y' || NEXT=='i' || NEXT=='t' ) ){ //cy->ty,chi->ti			*pbyNewCode = 't';			return TRUE;		}		else if( NOW == 'k' && (NEXT == 'a' || NEXT=='u' || NEXT=='o' || NEXT =='k') ){ //ca,cu,co->ka,ku,ko			*pbyNewCode = 'k';			return TRUE;		}		else if( NOW=='s' && (NEXT=='i' || NEXT=='e' || NEXT=='s') ){ //ci,ce->si,se			*pbyNewCode = 's';			return TRUE;		}		return TRUE;			}		//S: tsu->tu	if( (byCode == 's' || byCode == 'S') && dwIndex!=0 && PREV=='t' && NOW=='u' ){			return FALSE;	}		//F: fu->hu	if( (byCode == 'f' || byCode == 'F') && NEXT != '\0' && NOW=='h' && (NEXT=='u' || NEXT=='h')  ){			*pbyNewCode = 'h';				return TRUE;	}	return TRUE;#undef PREV#undef NEXT#undef NOW}//文字列の長さにフィットするVOID AdjustRect( HWND hWnd,HFONT hFont,LPRECT lpRect,LPCTSTR lpString,BYTE bFormat ){	HDC hDC;	HFONT hFontOld;	SIZE size;	INT w,h;	hDC = GetDC( hWnd );	hFontOld = SelectObject( hDC,hFont );			GetTextExtentPoint32( hDC,lpString,lstrlen(lpString),&size );	w =lpRect->right-lpRect->left;	h =lpRect->bottom-lpRect->top;		if( w > size.cx ){		if( bFormat & AR_LEFT ){			lpRect->right-=(w - size.cx);		}		else if( bFormat & AR_RIGHT ){			lpRect->left+=(w - size.cx);		}		else if( bFormat & AR_CENTER ){			lpRect->left+= (w - size.cx)/2;			lpRect->right-= (w - size.cx)/2;		}	}		if( h > size.cy ){		if( bFormat & AR_TOP ){			lpRect->bottom-=(h - size.cy);		}		else if( bFormat & AR_BOTTOM ){			lpRect->top+=(h - size.cy);		}		else if( bFormat & AR_MIDDLE ){			lpRect->top+= (h - size.cy)/2;			lpRect->bottom-= (h - size.cy)/2;		}	}	SelectObject( hDC,hFontOld );			ReleaseDC( hWnd,hDC );}